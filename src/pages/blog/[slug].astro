---
import MainLayout from '../../layouts/MainLayout.astro'
import { wpquery } from '../../data/wordpress'

export async function getStaticPaths() {
	const data = await wpquery({
		query: `
      query LoadAllPosts {
        posts {
          nodes {
            title
            slug
            featuredImage {
              node {
                mediaItemUrl
                srcSet
                sizes
                altText
              }
            }
            content(format: RENDERED)
            author {
              node {
                name
              }
            }
          }
        }
      }
    `,
	})
	return data.posts.nodes.map((post: any) => {
		return {
			params: { slug: post.slug },
			props: { post },
		}
	})
}
const { post } = Astro.props
---

<MainLayout>
	<div class='container'>
		<h1 class='text-2xl font-bold pt-5'>{post.title}</h1>
		<article class='prose lg:prose-xl pt-5 prose-invert'>
			<Fragment set:html={post.content} />
		</article>
	</div>
</MainLayout>
