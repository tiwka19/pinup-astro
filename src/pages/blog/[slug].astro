---
import MainLayout from '../../layouts/MainLayout.astro'

const { slug } = Astro.params;

let res = await fetch(`http://pinup4.local/wp-json/wp/v2/posts?slug=${slug}`)
let [post] = await res.json();

export async function getStaticPaths() {
	let data = await fetch("http://pinup4.local/wp-json/wp/v2/posts")
  let posts = await data.json();

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post: post },
  }));
}
---

<MainLayout title={post.seo.title} description={post.seo.metaDesc}>
	<div class='container'>
		<h1 class='text-2xl font-bold pt-5'>{post.title}</h1>
		<article class='prose lg:prose-xl pt-5 prose-invert'>
			<Fragment set:html={post.content.rendered} />
		</article>
	</div>
</MainLayout>
